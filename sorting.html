<!DOCTYPE html>
<html>
<head>
<title>Визуализация обменных сортировок</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.0/processing.min.js"></script>  
</head>
<body>
  <p>
      <img align="center" src="Bubble-sort-example-300px.gif" />
   </p>
   <p>
      <a href="https://processing.org/">Processing</a> - открытый язык программирования, основанный на Java. Представляет инструментарий для работы с 
      изображениями, анимацией и интерфейсами. 
      <a href="https://processing.org/">Processing.js</a> - это web-фреймворк, использующий синтаксис языка Processing.
      Коды приведённых в статье программ можно запустить в своём баузере, используя редакторы <a href="http://studio.sketchpad.cc/">studio.sketchpad.cc</a>
      и <a href="https://openprocessing.org/">openprocessing.org</a>
   </p>
   <p>  
    Помимо этого, коды можно запустить в виде скрипта на своей html-странице. Подробней об этом можно узнать из оффициальной документации 
    Mozilla по <a href="https://wiki.mozilla.org/Processing.js_for_JavaScript_Devs">ссылке</a>. 
  </p>
  <p> 
  Для того, чтобы запустить скрипт на своей странице, требуется загрузить плагин (библиотеку для отрисовки) в корневую папку 
  и указать путь к плагину в теге script
  </p>
  <p> 
  <blockquote>
	  src="processing.min.js"
  </blockquote></p> 
  <p> Непосредственно сам скрипт должент располагаться в теге с атрибутом type="application/processing"
  <blockquote>
  			void setup(){
				size(200, 200);
			}			
			void draw(){
				background(50);
				ellipse(mouseX, mouseY, 50, 50);
			}		
  </blockquote></p> 
<p> Результат выполнения данного скрипта </p>
<p>
<script type="application/processing">
			void setup(){
				size(200, 200);
			}			
			void draw(){
				background(50);
				ellipse(mouseX, mouseY, 50, 50);
			}
		</script>
<canvas> </canvas>	
</p>
  <h2>Сортировка числового массива</h2>
  <p>
  Метод сортировки обменами лежит в основе некоторых более совершенных алгоритмов, хотя сам практически не применяется вне учебной литературы
   <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D1%80%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D1%83%D0%B7%D1%8B%D1%80%D1%8C%D0%BA%D0%BE%D0%BC">ссылка</a>
  </p>
  <p>
  "Алгоритм состоит из повторяющихся проходов по сортируемому массиву. За каждый проход элементы последовательно сравниваются попарно и, 
   если порядок в паре неверный, выполняется перестановка элементов." Замечу, что попарно сравниваются именно соседние элементы, то есть 
   элементы с индексами <em>i</em> и <em>i+1</em> (буквой <em>i</em> обычно обозначается индекс элемета массива). 
  </p>    
  <h2>Создание массива числовых элементов</h2>
  <p>
  Пускай массив состоит из 10 элементов. Каждый элемент имеет порядковый номер. Этот номер и определяет положение элемента в
  отсортированном массиве. В неотсортированном массиве положение элемента определяется смещением. Изменяя этот параметр 
  элементы с большими порядковыми номерами смещаются правее элементоов с меньшими номерами. Функция <em>setup()</em> запускается вместе с основной программой
  и служит для определения изначальных исходных элементов   
   <pre>
   void setup() {
    size(500, 200);
    mods = new Module[moduleSize];
    mods[0] = new Module( 0,40);
    mods[1] = new Module( 5,80);
    mods[2] = new Module( 3,120);
    mods[3] = new Module( 6,160);
    mods[4] = new Module( 2,200);
    mods[5] = new Module( 4,240);
    mods[6] = new Module( 8,280);
    mods[7] = new Module( 7,320);
    mods[8] = new Module( 9,360);
    mods[9] = new Module( 1,400);
}   </pre>
  </p>
  <p>
       Функция <a href="https://processing.org/reference/draw_.html">draw()<a> вызывается после функции <em>setup()</em> и представляет из себя бесконечный цикл, 
   в котором производится обработка исполняемого кода. Обновление экрана и отрисовка экземпляров класса происходит при вызове функции <em>draw()</em>.
   Метод <em>mod.display()</em> предназначен для отрисовки экземпляра <em>mod</em>, принадлежащего классу <em>Module</em>
   <pre> for (Module mod: mods) { mod.display(); }  </pre>  
  </p>
  <h2>Создание класса</h2>
  <p> 
       Каждый элемент массива <em>mods</em> является экземпляром класса <em>Module</em> (пример работы с классом по <a href="https://processing.org/examples/arrayobjects.html">ссылке</a>).
   Порядковый номер содержится в переменной <em>Hight</em>, а смещение числа относительно начала координат в переменной <em>xOffset</em>. 
   Метод <em>display()</em> отвечает за отрисовку символа. Одним из базовых принципов ООП является полиморфизм, и данный метод можно отнести к
   полиморфным, т.к. метод может отображать величину как в виде текста, так и виде прямоугольника, в котором данная величина является 
   высотой. Можно провести аналогию между классом и неким работником, выполняющим возложенные на него поручения. 
   Работник обладает ограниченной памятью, он помнит, какое число содержится в элементе, помнит смещение элемента от начала коордитат.
   Используя метод <em>display()</em> работник может отобразить данное число, сместив его на заданное расстояние.   
  </p>
  <p>
   Код класса <em>Module</em>
  </p>  
  <pre>
  class Module {
  int Offset;
  int Hight;
  // Contructor
   Module( int tempHight, int tempOffset) {
    Hight=tempHight;
    Offset = tempOffset;
    }
  // Custom method for drawing the object
   void display() {
      textSize(20);
      text(Hight,Offset, 70); // Offset, Hight
    }
} 
  </pre>
 <h2>Перемещение ползунка</h2> 
 <p> 
 События, генерируемые нажатием на левую кнопку мыши, обрабатываются функциями <a href="https://processing.org/reference/mousePressed_.html">mousePressed()</a> 
 и <a href="https://processing.org/reference/mouseReleased_.html">mouseReleased()</a>.   
 Функция <em>mousePressed()</em> сравнивает (меняет местами) элементы
 <pre>
 void mousePressed() {
 if(mods[slider].Hight > mods[slider+1].Hight)
        {
        vTemp= mods[slider].Hight;
        mods[slider].Hight=mods[slider+1].Hight;
        mods[slider+1].Hight=vTemp;
        }
} 
 </pre> 
 <p>   
 Функция <em>mouseReleased()</em> инкрементирует переменную, отвечающую за положение ползунка и таким образом ползунок смещается 
 вправо <em>slider++</em>
 </p>
 <p> 
  Ползунок возвращается в начальную позицию при выходе за границы массива <em>slider=0</em> 
</p>
 <pre>
 void mouseReleased() {
    slider++;
    if(slider>=moduleSize-1) {  slider=0; }
  }
 </pre>  
    
Программу можно запустить <a href="http://studio.sketchpad.cc/sp/pad/view/IYL4ygKbhu/latest">здесь</a>
</p>
<h2>Случайные значения</h2>
<p>
Пусть <em>listRand</em> представляет динамический список <a href="https://processing.org/reference/ArrayList.html">ArrayList</a> для хранения случайных величин
<pre>  ArrayList<newRand> listRand = new ArrayList<newRand>(); </pre>
Пусть функция <em>randomizer()</em> генерирует случайную величину и, если этой велчины нет в списке <em>listRand</em>, заносит эту величину в список
<pre>
int randomizer(){
  newRand = int(random(0,10));
  if(!listRand.contains(newRand) )  listRand.add(newRand );
          else newRand=randomizer();
                return newRand;
}
</pre>
Пускай массив <em> mods</em> заполняется случайными величинами с исользованием функции <em> randomizer()</em>
<pre>
    mods = new Module[moduleSize];
    mods[0] = new Module( randomizer(),40);
    mods[1] = new Module( randomizer(),80);
    mods[2] = new Module( randomizer(),120);
    mods[3] = new Module( randomizer(),160);
    mods[4] = new Module( randomizer(),200);
    mods[5] = new Module( randomizer(),240);
    mods[6] = new Module( randomizer(),280);
    mods[7] = new Module( randomizer(),320);
    mods[8] = new Module( randomizer(),360);
    mods[9] = new Module( randomizer(),400);
</pre>
 
Страница для запуска программы <a href="http://studio.sketchpad.cc/sp/pad/view/ro.96ZopUhSgAwaP/latest">здесь</a>
</p>   
    
<h2>Добавление визуальных элементов</h2>
<p>
Для большей наглядности числа, изображающие порядковые номера элементов заменим массивом прямоугольников. По умолчанию 
первые два параметра прямоугольника <a href="https://processing.org/reference/rect_.html">rect()</a> задают расположение верхнего левого угла, третий задает ширину, а четвертый задает высоту.
Добавим кнопку (прямоугольник в левом нижнем углу), при нажатии на которую производится смещение ползунка. Пример работы с кнопкой 
<a href="https://processing.org/examples/button.html">здесь</a>.
Булевая функция <em>overButton()</em> сопоставляет положение курсора и кнопки и возвращает <em>true</em>, если курсор находится над кнопкой
<pre>
boolean overButton(int x, int y, int width, int height) {
if (mouseX >= x && mouseX <= x+width &&
    mouseY >= y && mouseY <= y+height) {
    return true;
    } else {
    return false;
    }
}
</pre>
Страница для запуска программы <a href="http://studio.sketchpad.cc/sp/pad/view/BMOL4ZHG0k/latest">здесь</a>
</p>

<h2>Ограничитель</h2>
<p> 
Можно уменьшить количество переборов, если не перебирать уже отсортированные элементы. Пусть ограничитель <em>limiterR</em> сдвигается влево после каждого перебора 
<pre>
if(slider >= limiterR) { slider=0; limiterR--; }
</pre>
Пусть ползунок останавливается, дойдя до первого элемента
<pre>
if(limiterR <= 1) limiterR = 1;
</pre>
Страница для запуска программы <a href="http://studio.sketchpad.cc/sp/pad/view/ro.96SYTVsqq$B0t/latest">здесь</a>
</p>
<h2>Флаг</h2>
<p>
Пусть флаг <em>swapFlag</em> поднимается при обмене элементов 
<pre>
if(mods[slider].rectHight > mods[slider+1].rectHight)
        {
        swapFlag = true;    
        vTemp= mods[slider].rectHight;
        mods[slider].rectHight=mods[slider+1].rectHight;
        mods[slider+1].rectHight=vTemp;
        }
</pre>
Если обменов не производилось, значит массив уже упорядочен и цикл можно завершать
<pre>
 if(swapFlag){ slider=0; swapFlag = false;} 
       else { slider = moduleSize-2; }
</pre>
Флаг изображается в виде двух прямоугольников. При обмене элементов флаг меняет цвет
<pre>
    fill(150);
    rect(250,20,5,30);
    rect(255,20,20,15);
    if(!swapFlag){fill(100); rect(255,20,20,15);}
    else{fill(35,255,70); rect(255,20,20,15);}  
</pre>
Страница для запуска программы <a href="http://studio.sketchpad.cc/sp/pad/view/ro.9tyijc0lTAVUD/latest">здесь</a>
</p>
</body>
</html>
